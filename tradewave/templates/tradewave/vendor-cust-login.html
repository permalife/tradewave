<!DOCTYPE HTML>
<!--
  Escape Velocity 2.5 by HTML5 UP
  html5up.net | @n33co
  Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
{% load staticfiles %}
<html>
  <head>
    <title>Trade Wave</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Global Variable for js -->
    <script language="javascript">var STATIC_URL = "{{ STATIC_URL|escapejs }}";</script>

    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,700,900" rel="stylesheet" />
    <!--[if lte IE 8]><script src="js/html5shiv.js"></script><link rel="stylesheet" href="css/ie8.css" /><![endif]-->
    <script src="{% static "js/jquery.min.js" %}"></script>
    <script src="{% static "js/jquery.dropotron.min.js" %}"></script>
    <script src="{% static "js/config.js" %}"></script>
    <script src="{% static "js/skel.min.js" %}"></script>
    <script src="{% static "js/skel-panels.min.js" %}"></script>
		<script src="{% static "js/jquery.webcamqrcode.js" %}"></script>
    <!--script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script-->
    <!--script src="{% static "js/html5-qrcode.min.js" %}"></script-->

    <!--noscript-->
    <link rel="stylesheet" type="text/css" href="{% static "css/skel-noscript.css" %}"/>
    <link rel="stylesheet" type="text/css" href="{% static "css/style.css" %}"/>
    <link rel="stylesheet" type="text/css" href="{% static "css/style-desktop.css" %}"/>
    <!--/noscript-->
  </head>

  <body class="homepage">
    <script>
    (function($){
      $('document').ready(function(){
        $('#qrcodebox').WebcamQRCode({
          onQRCodeDecode: function( p_data ) {
            //window.alert("QR Code read: " + p_data);
            //$('#qrcode_result').html( p_data );
            document.getElementById("qr_status").innerHTML="<strong> Code scanned </strong>";
            document.getElementById("qr_string").value=p_data;
            document.getElementById("qr_pin").style.visibility="visible";
            document.getElementById("label_qr_pin").style.visibility="visible";
            document.getElementById("button_qr_login").style.visibility="visible";
          }
        });

        $('#btn_start').click(function() {
          document.getElementById("cust-login-form").style.display="none";
          $('#qrcodebox').WebcamQRCode().start();
        });

        $('#btn_stop').click(function() {
          $('#qrcodebox').WebcamQRCode().stop();
        });
      });
    })(jQuery);
    </script>

    {% include "tradewave/header.html" %}

    <!-- Intro Wrapper -->
    <div id="intro-wrapper" class="wrapper wrapper-style1">
      <div class="title"> {{ entity_vendor }}</div>
      <div class="container">
        <div class="row 150%">

          {% include "tradewave/sidebar.html" %}

          <div class="10u 12u(mobile) important(mobile)">
            <div id="content">
              <div class="row">
                <div class="12u">

                  <section id="intro">
                    <p class="style1">Customer paying to <strong> {{ entity_vendor }} </strong>.</p>
                    <p class="style1">Customer login:</p>

                    <!-- Login Form -->
                    <form method="post" action="{% url 'tradewave:process_cust_login' login_reason='transaction' %}">
                      {% csrf_token %}
                      <div id="cust-login-form">
                        <div class="row">
                          <div class="3u">
                            <p></p>
                          </div>
                          <div class="3u">
                            <input type="text" class="text" name="cust_name" id="user-email" placeholder="Email" />
                          </div>
                          <div class="3u">
                            <input type="password" class="text" name="cust_password" id="user-password" placeholder="Password" />
                          </div>
                        </div>
                        <div class="row">
                          <div class="12u">
                            <center>
                              <input type="submit" class="button button-style1 button-big" value="Login" />
                              <input type="button" class="button button-style1 button-big" value="Scan card" id="btn_start" />
                              <!--input type="button" class="button button-style3 button-big" value="Stop" id="btn_stop" /-->
                            </center>
                          </div>
                        </div>
                      </div>

                      <!-- QR Reader Wrapper -->
                      <div class="row">
                        <div class="12u">
                          <center>
                            <!--p class="style1"> Or scan card: </p-->
                            <!-- Web Cam to Scan QR Codes-->
                            <div style="width: 350px; height: 350px;" id="qrcodebox">
                            </div>
                            <!--p>
                              Last QRCode value: <span id="qrcode_result">none</span>
                            </p-->
                            <!--End of WebCam TO Scan QR Codes -->
                          </center>
                        </div>
                      </div>

                      <div class="row half">
                        <div class="12u">
                          <p class="style1" id="qr_status"> </p>
                        </div>
                      </div>

                      <div class="row half">
                        <div class="3u">
                          <input type="hidden" class="text" name="cust_qr_string" id="qr_string" value="" readonly>
                        </div>
                      </div>

                      <div class="row half">
                          <div class="3u">
                            <p></p>
                          </div>
                          <div class="3u">
                            <p id="label_qr_pin" class="style1" style="visibility:hidden"> Enter your pin: </p>
                          </div>
                          <div class="3u">
                            <input type="password" class="text" name="cust_pin" id="qr_pin" value="" style="visibility:hidden" size=4 maxlength=4>
                          </div>
                      </div>

                      <div class="row half">
                        <div class="12u">
                          <center>
                            <input type="submit" class="button button-style3 button-big" id="button_qr_login" value="Enter" style="visibility:hidden"/>
                          </center>
                        </div>
                      </div>

                      <div class="row half">
                        <div class="12u">
                          <input type="hidden" class="text" name="tr_amount" id="product-amount" value="{{ tr_amount }}" readonly>
                        </div>
                      </div>
                      <!-- /QR Reader Wrapper -->

                    </form>
                    <!-- /Login Form -->

                  </section>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer Wrapper -->
    {% include "tradewave/footer.html" %}
    <!-- /Footer Wrapper -->

    <!--script type="text/javascript">
      $('#reader').html5_qrcode(
        function(data) {
          // do something when code is read
          document.getElementById("qr_status").innerHTML="<strong> QR code scanned </strong>";
          document.getElementById("qr_string").value=data;
          document.getElementById("qr_pin").style.visibility="visible";
          document.getElementById("label_qr_pin").style.visibility="visible";
          document.getElementById("button_qr_login").style.visibility="visible";
          //window.alert("QR Code read: " + data);
        },
        function(error){
          //show read errors
          window.alert(error);
        },
  		  function(videoError){
          //the video stream could be opened
          window.alert(videoError);
        }
      );
    </script-->

  </body>
</html>
