{% extends "tradewave/base.html" %}

{% load tw_extras %}

{% block title %}
  Paying to {{ entity_vendor }}
  <h5 class="style1">Transaction total:
  <strong>$ {{ tr_amount|floatformat:2 }}</strong></h5>
{% endblock %}

{% block content %}
  <section id="intro">
      <!-- Credit Form  This should Auto-populate with recommended credits-->
      <form method="post" action="{% url 'tradewave:process_vendor_payment' %}">
        {% csrf_token %}
            {% for credit_uuid, credit_data in cust_credits.iteritems %}
              <div class="row">
                <div class="left-input small-6 medium-5 medium-offset-1 columns">
                  <select name="credits" readonly>
                    <option
                      type="text"
                      class="text"
                      id="credit-{{ credit_uuid }}"
                      value="{{ credit_uuid }}"
                      readonly>
                      {{credit_data.name}}
                    </option>
                  </select>
                </div>

                <div class="right-input small-6 medium-5 columns end">
                  <input
                    type="number"
                    min="0.01"
                    step="0.01"
                    max="{{ credit_data.amount|floatformat:2 }}"
                    class="text"
                    name="amounts"
                    id="credit-{{ credit_uuid }}-amount"
                    value="{{credit_data.amount|floatformat:2}}"
                    readonly>
                </div>
              </div>

          {% empty %}
            <div class="row">
              <p class="style3">
                <strong> User has no credits to buy this product </strong>
              </p>
            </div>
          {% endfor %}

        {% if tr_amount > cust_total %}
          <div class="row">
              <p class="style1"> <strong>The remainder of ${{ tr_amount|subtract:cust_total|floatformat:2 }} has to be paid in cash </strong></p>
          </div>
        {% endif %}

        <div class="row one-margin-top">
        <!-- Be sure to verify that the correct amount has been sent -->
          <input type="submit" class="button" value="Continue" />
          <input type="reset" class="button secondary" value="Reset" />
        </div>

      </div>
    </form>
    <!-- /Credit Form -->

  </section>
{% endblock %}
